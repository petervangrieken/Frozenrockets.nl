/* RiseSet-JS - Full Version
 * Copyright (c) 2011 Murtaza Gulamali under the terms and conditions of the
 * MIT License: http://www.opensource.org/licenses/mit-license.php
 *
 * All formulae adapted from those published in Meeus, J. (1991) Astronomical
 * Algorithms, William-Bell Inc., Richmond, VA, USA. ISBN: 0943396352
 */"use strict";var riseset={};riseset.d2r=function(e){return.0174532925199433*e};riseset.r2d=function(e){return 57.2957795130823*e};riseset.isJulian=function(e){if(e.getFullYear()<1582)return!0;if(e.getFullYear()==1582){if(e.getMonth()<10)return!0;if(e.getMonth()==10&&e.getDate()<5)return!0}return!1};riseset.dateToAJD=function(e){var t=e.getFullYear(),n=e.getMonth()+1,r,i,s=e.getDate()+e.getHours()/24+e.getMinutes()/1440+e.getSeconds()/86400+e.getMilliseconds()/864e5;if(n<3){t--;n+=12}riseset.isJulian(e)?i=0:(r=Math.floor(t/100),i=2-r+Math.floor(r/4));return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(n+1))+s+i-1524.5};riseset.AJD_ToDate=function(e){var t,n,r,i,s,o,u,a,f,l;u=Math.floor(e+.5);o=e+.5-u;if(u<2299161)t=u;else{a=Math.floor((u-1867216.25)/36524.25);t=u+1+a-Math.floor(a/4)}n=t+1524;r=Math.floor((n-122.1)/365.25);i=Math.floor(365.25*r);s=Math.floor((n-i)/30.6001);var c=n-i-Math.floor(30.6001*s)+o,h=(c-Math.floor(c))*24,p=(h-Math.floor(h))*60,d=(p-Math.floor(p))*60,v=(d-Math.floor(d))*1e3;s<14?f=s-2:f=s-14;f<2?l=r-4715:l=r-4716;return new Date(l,f,c,h,p,d,v)};riseset.solarMeanAnomaly=function(e){var t=(e-2451545)/36525;return 357.52772+35999.05034*t-1603e-7*t*t-t*t*t/3e5};riseset.lunarMeanAnomaly=function(e){var t=(e-2451545)/36525;return 134.96298+477198.867398*t+.0086972*t*t+t*t*t/56250};riseset.nutationLongitude=function(e){var t=(e-2451545)/36525,n=riseset.d2r(125.04452-1934.136261*t+.0020708*t*t+t*t*t/45e3),r=riseset.d2r(280.4665+36000.7698*t),i=riseset.d2r(218.3165+481267.8813*t);return(-17.2*Math.sin(n)-1.32*Math.sin(2*r)-.23*Math.sin(2*i)+.21*Math.sin(2*n))/3600};riseset.nutationObliquity=function(e){var t=(e-2451545)/36525,n=riseset.d2r(125.04452-1934.136261*t+.0020708*t*t+t*t*t/45e3),r=riseset.d2r(280.4665+36000.7698*t),i=riseset.d2r(218.3165+481267.8813*t);return(9.2*Math.cos(n)+.57*Math.cos(2*r)+.1*Math.cos(2*i)-.09*Math.cos(2*n))/3600};riseset.nutationRightAscension=function(e){return riseset.nutationLongitude(e)*Math.cos(riseset.d2r(riseset.trueObliquity(e)))};riseset.obliquityOfEcliptic=function(e){var t=(e-2451545)/36525;return 23.43929111111111-46.815/3600*t-59e-5/3600*t*t+.001813/3600*t*t*t};riseset.trueObliquity=function(e){return riseset.obliquityOfEcliptic(e)+riseset.nutationObliquity(e)};riseset.meanSiderealTime=function(e){var t=(e-2451545)/36525,n=(280.46061837+360.98564736629*(e-2451545)+387933e-9*t*t-t*t*t/3871e4)%360;while(n<0)n+=360;return n};riseset.apparentSiderealTime=function(e){return riseset.meanSiderealTime(e)+riseset.nutationRightAscension(e)};riseset.solarPosition=function(e){var t=(e-2451545)/36525,n=(280.46645+36000.76983*t+3032e-7*t*t)%360;n<0&&(n+=360);var r=(357.5291+35999.0503*t-1559e-7*t*t-4.8e-7*t*t*t)%360;r<0&&(r+=360);var i=riseset.d2r(r),s=.016708617-42037e-9*t-1.236e-7*t*t,o=(1.9146-.004817*t-14e-6*t*t)*Math.sin(i)+(.019993-101e-6*t)*Math.sin(2*i)+29e-5*Math.sin(3*i),u=n+o,a=r+o,f=1.000001018*(1-s*s)/(1+s*Math.cos(riseset.d2r(a))),l=125.04-1934.136*t,c=u-.00569-.00478*Math.sin(riseset.d2r(l)),h=riseset.obliquityOfEcliptic(e)+.00256*Math.cos(riseset.d2r(l)),p=Math.atan2(Math.cos(riseset.d2r(h))*Math.sin(riseset.d2r(c)),Math.cos(riseset.d2r(c))),d=Math.asin(Math.sin(riseset.d2r(h))*Math.sin(riseset.d2r(c)));return[riseset.r2d(p),riseset.r2d(d)]};